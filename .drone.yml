kind: pipeline
type: kubernetes
name: default

trigger:
  ref:
  - refs/heads/master
  - refs/heads/**
  - refs/pull/*/head

steps:
  - name: build
    image: maven:3-openjdk-8-slim
    commands:
      - mkdir -p data/uploads
      - ./generateDummySslCertificates.sh
      - mvn clean install -DskipTests=true -DskipCheckStyle=false -Dmaven.javadoc.skip=true -B -V
      - mvn test -B -DskipCheckStyle=true -Djava.security.auth.login.config=${PWD}/kafka-webview-ui/src/test/resources/jaas.conf

